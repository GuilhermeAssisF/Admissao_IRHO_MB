<list>
  <ProcessDefinition>
    <processDefinitionPK>
      <companyId>1</companyId>
      <processId>FLUIG-0002</processId>
    </processDefinitionPK>
    <processDescription>Admissão IRHO</processDescription>
    <instruction></instruction>
    <active>true</active>
    <publicProcess>false</publicProcess>
    <volumeId>Default</volumeId>
    <categoryId>Admissão Digital</categoryId>
    <managerEngineAllocationId>Usuário</managerEngineAllocationId>
    <managerEngineAllocationConfiguration>&lt;AssignmentController&gt;&lt;User&gt;app.candidato&lt;/User&gt;&lt;/AssignmentController&gt;</managerEngineAllocationConfiguration>
    <snapshotFrequency>0</snapshotFrequency>
    <baseDay>0</baseDay>
    <baseMonth>0</baseMonth>
    <periodId>Default</periodId>
    <uniqueCardVersion>false</uniqueCardVersion>
    <keyWord></keyWord>
    <complementsLevel>1</complementsLevel>
    <notifyRequisitionerComplements>true</notifyRequisitionerComplements>
    <notifyManagerComplements>false</notifyManagerComplements>
    <deadlineTime>0</deadlineTime>
    <warningDeadlineTime>0</warningDeadlineTime>
    <notifyAuthorityComplements>true</notifyAuthorityComplements>
  </ProcessDefinition>
  <ProcessDefinitionVersion>
    <processDefinitionVersionPK>
      <companyId>1</companyId>
      <processId>Admissão IRHO</processId>
      <version>22</version>
    </processDefinitionVersionPK>
    <versionDescription></versionDescription>
    <formId>14154</formId>
    <editionMode>true</editionMode>
    <updateAttachmentsVersion>false</updateAttachmentsVersion>
    <controlsAttachmentsSecurity>false</controlsAttachmentsSecurity>
    <active>true</active>
    <blockedVersion>false</blockedVersion>
    <counterSign>false</counterSign>
    <openInstances>0</openInstances>
    <bpmnVersion>2</bpmnVersion>
    <processStates/>
    <favorito>false</favorito>
    <inheritFormSecurity>false</inheritFormSecurity>
    <mobileReady>true</mobileReady>
  </ProcessDefinitionVersion>
  <list>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
        <sequence>1</sequence>
      </processStatePK>
      <stateName>Início</stateName>
      <stateDescription>Início</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId></engineAllocationId>
      <engineAllocationConfiguration></engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>true</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>false</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>260</positionX>
      <positionY>140</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>10</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
        <sequence>97</sequence>
      </processStatePK>
      <stateName>Validar Kit Admissão</stateName>
      <stateDescription>Validar Kit Admissão</stateDescription>
      <instruction></instruction>
      <deadlineTime>28800</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>Usuário</engineAllocationId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;User&gt;admin&lt;/User&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>600</positionX>
      <positionY>120</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>80</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>0</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
        <sequence>122</sequence>
      </processStatePK>
      <stateName>Aguardando Candidato</stateName>
      <stateDescription>Aguardando Candidato</stateDescription>
      <instruction></instruction>
      <deadlineTime>0</deadlineTime>
      <deadlineFieldName></deadlineFieldName>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId>Papel</engineAllocationId>
      <engineAllocationConfiguration>&lt;AssignmentController&gt;&lt;Role&gt;papel_integrador_admissao&lt;/Role&gt;&lt;/AssignmentController&gt;</engineAllocationConfiguration>
      <selectColleague>1</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>3600</allowanceAuthorityTime>
      <frequenceAuthorityTime>3600</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>true</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>380</positionX>
      <positionY>120</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>0</stateType>
      <bpmnType>80</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <noticeExpirationAuthorityTime>0</noticeExpirationAuthorityTime>
      <noticeExpirationRequisitionerTime>0</noticeExpirationRequisitionerTime>
      <noticeExpirationManagerTime>0</noticeExpirationManagerTime>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
      <executionType>0</executionType>
    </ProcessState>
    <ProcessState>
      <processStatePK>
        <companyId>1</companyId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
        <sequence>104</sequence>
      </processStatePK>
      <stateName>Fim</stateName>
      <stateDescription>Fim</stateDescription>
      <instruction>Atividade final do processo</instruction>
      <deadlineTime>0</deadlineTime>
      <joint>false</joint>
      <agreementPercentage>0</agreementPercentage>
      <engineAllocationId></engineAllocationId>
      <engineAllocationConfiguration></engineAllocationConfiguration>
      <selectColleague>0</selectColleague>
      <initialState>false</initialState>
      <notifyAuthorityDelay>true</notifyAuthorityDelay>
      <notifyRequisitionerDelay>false</notifyRequisitionerDelay>
      <allowanceAuthorityTime>0</allowanceAuthorityTime>
      <frequenceAuthorityTime>1</frequenceAuthorityTime>
      <allowanceRequisitionerTime>0</allowanceRequisitionerTime>
      <frequenceRequisitionerTime>0</frequenceRequisitionerTime>
      <transferAttachments>false</transferAttachments>
      <subProcessId></subProcessId>
      <formFolder>0</formFolder>
      <notifyAuthorityFollowUp>false</notifyAuthorityFollowUp>
      <notifyRequisitionerFollowUp>false</notifyRequisitionerFollowUp>
      <automatic>false</automatic>
      <positionX>880</positionX>
      <positionY>140</positionY>
      <forecastedEffortType>0</forecastedEffortType>
      <forecastedEffort>0</forecastedEffort>
      <notifyManagerFollowUp>false</notifyManagerFollowUp>
      <notifyManagerDelay>false</notifyManagerDelay>
      <allowanceManagerTime>0</allowanceManagerTime>
      <frequenceManagerTime>0</frequenceManagerTime>
      <inhibitTransfer>false</inhibitTransfer>
      <periodId></periodId>
      <stateType>6</stateType>
      <bpmnType>60</bpmnType>
      <signalId>0</signalId>
      <counterSign>false</counterSign>
      <openInstances>0</openInstances>
      <destinationStates/>
      <digitalSignature>false</digitalSignature>
    </ProcessState>
  </list>
  <list/>
  <list>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
        <linkSequence>123</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>122</initialStateSequence>
      <finalStateSequence>97</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
        <linkSequence>126</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>1</initialStateSequence>
      <finalStateSequence>122</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
    <ProcessLink>
      <processLinkPK>
        <companyId>1</companyId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
        <linkSequence>127</linkSequence>
      </processLinkPK>
      <actionLabel></actionLabel>
      <returnPermited>false</returnPermited>
      <initialStateSequence>97</initialStateSequence>
      <finalStateSequence>104</finalStateSequence>
      <returnLabel></returnLabel>
      <name></name>
      <automaticLink>false</automaticLink>
      <defaultLink>false</defaultLink>
      <type>0</type>
    </ProcessLink>
  </list>
  <list/>
  <list>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>Aprovacoes</eventId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>function VerifHierarquia(){&#xd;
	var codGestor = hAPI.getCardValue(&apos;codGestor&apos;);&#xd;
	var codDiretor = hAPI.getCardValue(&apos;codDiretor&apos;);&#xd;
	var Solicitante = hAPI.getCardValue(&apos;cpLoginFluig&apos;);&#xd;
	var retorno;&#xd;
	&#xd;
	if(codDiretor==Solicitante || codGestor==Solicitante){&#xd;
		retorno=1;&#xd;
	}else{&#xd;
		retorno=3;&#xd;
	}&#xd;
	return retorno;&#xd;
}&#xd;
&#xd;
function Abertura(){&#xd;
&#xd;
    var cpLoginFluig = hAPI.getCardValue(&apos;cpLoginFluig&apos;);&#xd;
    var codGestorDestino = hAPI.getCardValue(&apos;codGestorDestino&apos;);&#xd;
    var codGestorOrigem = hAPI.getCardValue(&apos;codGestorOrigem&apos;);&#xd;
    var codDiretorOrigem = hAPI.getCardValue(&apos;codDiretorOrigem&apos;); &#xd;
    &#xd;
		if(cpLoginFluig!=codGestor &amp;&amp;  cpLoginFluig!=codDiretor!=&quot;&quot;){&#xd;
			retorno=&quot;GO&quot;;&#xd;
			//passa gestor origem&#xd;
		}&#xd;
		if(cpLoginFluig==codGestor &amp;&amp;  cpLoginFluig!=codDiretor &amp;&amp; codDiretor!=&quot;&quot;){&#xd;
			retorno=&quot;DO&quot;;&#xd;
			//passa diretor origem&#xd;
		}&#xd;
		if(cpLoginFluig==codGestor &amp;&amp;  (cpLoginFluig==codDiretor || codDiretor==&quot;&quot;) &amp;&amp; CodNovaSecao!=&quot;&quot;){&#xd;
			retorno=&quot;GD&quot;;&#xd;
			//passa gestor destino&#xd;
		}&#xd;
		if(cpLoginFluig==codGestor &amp;&amp;  (cpLoginFluig==codDiretor || codDiretor==&quot;&quot;) &amp;&amp; CodNovaSecao==&quot;&quot;){&#xd;
			retorno=&quot;RH&quot;;&#xd;
			//passa RH&#xd;
		}&#xd;
}&#xd;
&#xd;
function AprovaDiretor(){&#xd;
	var Aprovacao = hAPI.getCardValue(&apos;cpAprovacaoDiretor&apos;);&#xd;
	&#xd;
	if(AprovacaoGestor==&quot;1&quot;){&#xd;
		return true;&#xd;
	}else{&#xd;
		return false;&#xd;
	}&#xd;
}&#xd;
&#xd;
function AprovaRH(){&#xd;
	var Aprovacao = hAPI.getCardValue(&apos;cpAprovacaoRH&apos;);&#xd;
	&#xd;
	if(AprovacaoGestor==&quot;1&quot;){&#xd;
		return true;&#xd;
	}else{&#xd;
		return false;&#xd;
	}&#xd;
}&#xd;
&#xd;
function AprovaKit(){&#xd;
	var Aprovacao = hAPI.getCardValue(&apos;cpAprovacaoKit&apos;);&#xd;
&#xd;
	if(AprovacaoGestor==&quot;1&quot;){&#xd;
		return true;&#xd;
	}else{&#xd;
		return false;&#xd;
	}&#xd;
}</eventDescription>
    </WorkflowProcessEvent>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>inicioSchemaPessoa</eventId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>function inicioSchemaPessoa() {
	return &quot; &lt;RhuPessoa&gt;&quot;;
}</eventDescription>
    </WorkflowProcessEvent>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>afterProcessCreate</eventId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>function afterProcessCreate(processId){&#xd;
    // Grava o número do processo no formulário para referência futura&#xd;
    hAPI.setCardValue(&quot;idProcessoFluig&quot;, processId);&#xd;
    &#xd;
    log.info(&quot;&gt;&gt;&gt; ADMISSAO (AFTER PROCESS CREATE): Iniciando envio de e-mail customizado. ID: &quot; + processId);&#xd;
&#xd;
    try {&#xd;
        // 1. RECUPERA DADOS BÁSICOS DO FORMULÁRIO&#xd;
        var nomeCandidato = hAPI.getCardValue(&quot;txtNomeColaborador&quot;);&#xd;
        var emailCandidato = hAPI.getCardValue(&quot;txtEmail&quot;);&#xd;
        &#xd;
        // 2. RECUPERA DADOS DO EXAME MÉDICO (SE HOUVER)&#xd;
        var dataExame = hAPI.getCardValue(&quot;cpDataHoraExame&quot;);&#xd;
        var localExame = hAPI.getCardValue(&quot;cpNomeClinica&quot;);&#xd;
        var endExame = hAPI.getCardValue(&quot;cpEnderecoClinica&quot;);&#xd;
&#xd;
        // 3. RECUPERA O CONTEÚDO CUSTOMIZADO (DEFINIDO PELO RH NO ZOOM)&#xd;
        var assuntoEmail = hAPI.getCardValue(&quot;hidden_mail_assunto&quot;);&#xd;
        var corpoEmail = hAPI.getCardValue(&quot;hidden_mail_corpo&quot;);&#xd;
&#xd;
        log.info(&quot;&gt;&gt;&gt; ADMISSAO: Texto recuperado do campo oculto: &quot; + corpoEmail);&#xd;
&#xd;
        // 4. LÓGICA DE SEGURANÇA / FALLBACK&#xd;
        // Se por algum motivo o RH não selecionou nada, usa um padrão para não enviar e-mail em branco&#xd;
        if (corpoEmail == null || corpoEmail == &quot;&quot;) {&#xd;
            log.warn(&quot;&gt;&gt;&gt; ADMISSAO: Corpo do e-mail vazio. Usando texto padrão de fallback.&quot;);&#xd;
            corpoEmail = &quot;Olá! Seja bem-vindo(a). Por favor, acesse o portal para enviar seus documentos.&quot;;&#xd;
        } else {&#xd;
            // Converte as quebras de linha (Enter) do textarea para &lt;br&gt; do HTML&#xd;
            // O String() garante que não dê erro se vier algo diferente de texto&#xd;
            corpoEmail = String(corpoEmail).replace(/\n/g, &quot;&lt;br&gt;&quot;);&#xd;
        }&#xd;
&#xd;
        if (assuntoEmail == null || assuntoEmail == &quot;&quot;) {&#xd;
            assuntoEmail = &quot;Processo de Admissão - Monte Bravo&quot;;&#xd;
        }&#xd;
&#xd;
        // 5. MONTAGEM DO LINK PÚBLICO&#xd;
        // Ajuste a URL base conforme o seu ambiente (HML ou PROD)&#xd;
        var baseUrl = &quot;https://montebravo147803.fluig.cloudtotvs.com.br:2500/portal/1/pagina_candidato&quot;;&#xd;
        var linkPortal = baseUrl + &quot;?id_origem=&quot; + processId; &#xd;
&#xd;
        // 6. VALIDAÇÃO E ENVIO&#xd;
        if (emailCandidato != null &amp;&amp; emailCandidato != &quot;&quot;) {&#xd;
            &#xd;
            // Prepara os parâmetros para o Template HTML&#xd;
            var parametros = new java.util.HashMap();&#xd;
            &#xd;
            // Variáveis Fixas&#xd;
            parametros.put(&quot;NOME_CANDIDATO&quot;, nomeCandidato);&#xd;
            parametros.put(&quot;LINK_ADMISSAO&quot;, linkPortal);&#xd;
            &#xd;
            // Dados do Exame (com tratamento para não ir &quot;null&quot;)&#xd;
            parametros.put(&quot;DATA_EXAME&quot;, dataExame ? dataExame : &quot;A ser agendado&quot;);&#xd;
            parametros.put(&quot;LOCAL_EXAME&quot;, localExame ? localExame : &quot;A ser informado&quot;);&#xd;
            parametros.put(&quot;ENDERECO_EXAME&quot;, endExame ? endExame : &quot;A ser informado&quot;);&#xd;
&#xd;
            // Variável Dinâmica (O Texto do RH)&#xd;
            parametros.put(&quot;CORPO_PERSONALIZADO&quot;, corpoEmail);&#xd;
&#xd;
            // Assunto do E-mail (Requerido pelo Fluig)&#xd;
            parametros.put(&quot;subject&quot;, assuntoEmail);&#xd;
            parametros.put(&quot;SUBJECT&quot;, assuntoEmail);&#xd;
&#xd;
            // Lista de Destinatários&#xd;
            var destinatarios = new java.util.ArrayList();&#xd;
            destinatarios.add(emailCandidato);&#xd;
&#xd;
            // Definição do Remetente&#xd;
            var remetente = &quot;admin&quot;; // Ou o código de um usuário específico de RH&#xd;
&#xd;
            log.info(&quot;&gt;&gt;&gt; ADMISSAO: Tentando enviar e-mail para: &quot; + emailCandidato);&#xd;
            log.info(&quot;&gt;&gt;&gt; Assunto: &quot; + assuntoEmail);&#xd;
&#xd;
            // DISPARO DO E-MAIL&#xd;
            // Utiliza sempre o Template Mestre, injetando o texto variável&#xd;
            notifier.notify(remetente, &quot;TPL_ADMISSAO_MASTER&quot;, parametros, destinatarios, &quot;text/html&quot;);&#xd;
            &#xd;
            log.info(&quot;&gt;&gt;&gt; ADMISSAO: E-mail enviado com sucesso!&quot;);&#xd;
&#xd;
        } else {&#xd;
            log.warn(&quot;&gt;&gt;&gt; ADMISSAO: E-mail do candidato não preenchido. Envio cancelado.&quot;);&#xd;
        }&#xd;
&#xd;
    } catch (e) {&#xd;
        log.error(&quot;&gt;&gt;&gt; ADMISSAO: ERRO AO ENVIAR EMAIL: &quot; + e);&#xd;
        log.error(e.toString());&#xd;
    }&#xd;
}</eventDescription>
    </WorkflowProcessEvent>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>beforeTaskSave</eventId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>function beforeTaskSave(colleagueId, nextSequenceId, userList) {&#xd;
    var atividadeAtual = getValue(&quot;WKNumState&quot;);&#xd;
    &#xd;
    // Supondo que a atividade onde o Candidato devolve seja a 97 (conforme seu JS da widget)&#xd;
    // Se a widget envia para 97, o evento é disparado AO SAIR de onde o processo estava parado esperando.&#xd;
    &#xd;
    log.info(&quot;&gt;&gt;&gt; ADMISSAO DIGITAL: beforeTaskSave acionado.&quot;);&#xd;
    log.info(&quot;&gt;&gt;&gt; Atividade Atual: &quot; + atividadeAtual);&#xd;
    log.info(&quot;&gt;&gt;&gt; Próxima Atividade: &quot; + nextSequenceId);&#xd;
&#xd;
    // Tenta ler alguns campos chaves para ver se vieram&#xd;
    var cpf = hAPI.getCardValue(&quot;cpfcnpj&quot;);&#xd;
    var email = hAPI.getCardValue(&quot;cand_email&quot;);&#xd;
    var jsonDeps = hAPI.getCardValue(&quot;json_dependentes&quot;);&#xd;
    &#xd;
    log.info(&quot;&gt;&gt;&gt; DADOS RECEBIDOS:&quot;);&#xd;
    log.info(&quot;   - CPF: &quot; + cpf);&#xd;
    log.info(&quot;   - Email: &quot; + email);&#xd;
    log.info(&quot;   - JSON Dependentes (Tamanho): &quot; + (jsonDeps ? jsonDeps.length : &quot;Vazio&quot;));&#xd;
    &#xd;
    // Se quiser ver o conteúdo do JSON no log:&#xd;
    if (jsonDeps) {&#xd;
        log.info(&quot;   - Conteúdo JSON: &quot; + jsonDeps);&#xd;
    }&#xd;
}</eventDescription>
    </WorkflowProcessEvent>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>getIndex</eventId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>/**
 * Recupera os indices das linhas de um pai x filho.
 * 
 * @param fieldReference: id de um campo do pai x filho. Util para quando o formulario possui mais de um pai x filho.
 * @returns {java.util.TreeSet}: indice das linhas.
 */
function getIndexes(fieldReference){
	var regex = new RegExp(fieldReference+&apos;___&apos;);
	var map = hAPI.getCardData(parseInt(getValue(&apos;WKNumProces&apos;)));
	var iterator = map.keySet().iterator();
	var indexes = new java.util.TreeSet();	
	
	while(iterator.hasNext()){
		var id = iterator.next();
		
		if(id.match(regex) == null) continue;
		else indexes.add(id.split(&apos;___&apos;)[1]);
	}
	
	return indexes;
}</eventDescription>
    </WorkflowProcessEvent>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>afterTaskSave</eventId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>function afterTaskSave(colleagueId, nextSequenceId, userList) {&#xd;
    var atividadeAtual = getValue(&quot;WKNumState&quot;);&#xd;
    var numSolicitacao = getValue(&quot;WKNumProces&quot;);&#xd;
    &#xd;
    log.info(&quot;### ADMISSAO DIGITAL [&quot; + numSolicitacao + &quot;]: Iniciando afterTaskSave (Atividade &quot; + atividadeAtual + &quot;)&quot;);&#xd;
&#xd;
    // ---------------------------------------------------------&#xd;
    // BLOCO 1: CONVERSÃO DE ANEXOS (Vindo da Página Pública)&#xd;
    // ---------------------------------------------------------&#xd;
    var origem = hAPI.getCardValue(&quot;origem_dados&quot;);&#xd;
    &#xd;
    if (origem == &quot;pagina_publica&quot;) {&#xd;
        log.info(&quot;### ADMISSAO DIGITAL [&quot; + numSolicitacao + &quot;]: Origem pública detectada. Iniciando conversão de anexos.&quot;);&#xd;
        &#xd;
        // Mapeamento: [Nome do Campo Base64, Nome do Campo NomeArquivo]&#xd;
        var docsParaProcessar = [&#xd;
            [&quot;cand_doc_rg_base64&quot;,           &quot;cand_doc_rg_nome&quot;],&#xd;
            [&quot;cand_doc_titulo_base64&quot;,       &quot;cand_doc_titulo_nome&quot;],&#xd;
            [&quot;cand_doc_escolaridade_base64&quot;, &quot;cand_doc_escolaridade_nome&quot;],&#xd;
            [&quot;cand_doc_residencia_base64&quot;,   &quot;cand_doc_residencia_nome&quot;],&#xd;
            [&quot;cand_doc_banco_base64&quot;,        &quot;cand_doc_banco_nome&quot;],&#xd;
            [&quot;cand_doc_nascimento_base64&quot;,   &quot;cand_doc_nascimento_nome&quot;],&#xd;
            [&quot;cand_doc_foto_base64&quot;,         &quot;cand_doc_foto_nome&quot;],&#xd;
            [&quot;cand_doc_casamento_base64&quot;,    &quot;cand_doc_casamento_nome&quot;],&#xd;
            [&quot;cand_doc_dependentes_base64&quot;,  &quot;cand_doc_dependentes_nome&quot;]&#xd;
        ];&#xd;
&#xd;
        for (var i = 0; i &lt; docsParaProcessar.length; i++) {&#xd;
            var campoBase64 = docsParaProcessar[i][0];&#xd;
            var campoNome   = docsParaProcessar[i][1];&#xd;
&#xd;
            try {&#xd;
                var base64Content = new String(hAPI.getCardValue(campoBase64));&#xd;
                var fileName      = hAPI.getCardValue(campoNome);&#xd;
&#xd;
                if (base64Content != null &amp;&amp; base64Content != &quot;&quot; &amp;&amp; base64Content != &quot;null&quot;) {&#xd;
                    &#xd;
                    // Remove cabeçalhos de Data URI (ex: &quot;data:image/png;base64,&quot;)&#xd;
                    if (base64Content.indexOf(&quot;,&quot;) &gt; -1) {&#xd;
                        base64Content = base64Content.split(&quot;,&quot;)[1];&#xd;
                    }&#xd;
&#xd;
                    // Decodifica Base64 para Bytes&#xd;
                    var decodedBytes = java.util.Base64.getDecoder().decode(base64Content);&#xd;
&#xd;
                    // Cria o anexo no Fluig&#xd;
                    var attachment = hAPI.newAttachment();&#xd;
                    attachment.setFileName(fileName);&#xd;
                    attachment.setPrincipal(true);&#xd;
                    attachment.setAttach(true); // Exibe na aba anexos&#xd;
                    attachment.setFilecontent(decodedBytes);&#xd;
&#xd;
                    hAPI.attachDocument(attachment);&#xd;
                    &#xd;
                    log.info(&quot;### ADMISSAO DIGITAL [&quot; + numSolicitacao + &quot;]: Anexo &quot; + fileName + &quot; processado.&quot;);&#xd;
&#xd;
                    // Limpa o campo Base64 para não pesar o formulário&#xd;
                    hAPI.setCardValue(campoBase64, &quot;ANEXADO_AUTOMATICAMENTE&quot;);&#xd;
                }&#xd;
            } catch (erroDoc) {&#xd;
                log.error(&quot;### ADMISSAO DIGITAL [&quot; + numSolicitacao + &quot;]: Erro ao anexar &quot; + campoNome + &quot;: &quot; + erroDoc);&#xd;
            }&#xd;
        }&#xd;
        &#xd;
        // Limpa a flag para não rodar de novo se alguém salvar o processo manualmente depois&#xd;
        hAPI.setCardValue(&quot;origem_dados&quot;, &quot;processado_fluig&quot;);&#xd;
    }&#xd;
&#xd;
    // Executa apenas na atividade inicial (0 ou 4) ou Correção (41)&#xd;
    if (atividadeAtual == 0 || atividadeAtual == 4 || atividadeAtual == 41) {&#xd;
        var nomeColaborador = hAPI.getCardValue(&quot;txtNomeColaborador&quot;);&#xd;
        var emailDestino = hAPI.getCardValue(&quot;txtEmail&quot;);&#xd;
&#xd;
        if (emailDestino != null &amp;&amp; emailDestino != &quot;&quot;) {&#xd;
            try {&#xd;
                var codigoTemplate = &quot;TPL_ADMISSAO_BOASVINDAS&quot;; &#xd;
                var parametros = new java.util.HashMap();&#xd;
                parametros.put(&quot;NOME_CANDIDATO&quot;, nomeColaborador);&#xd;
                parametros.put(&quot;NUM_SOLICITACAO&quot;, numSolicitacao);&#xd;
                parametros.put(&quot;subject&quot;, &quot;Confirmação de Recebimento - Solicitação &quot; + numSolicitacao);&#xd;
&#xd;
                var destinatarios = new java.util.ArrayList();&#xd;
                destinatarios.add(emailDestino);&#xd;
&#xd;
                notifier.notify(&quot;admin&quot;, codigoTemplate, parametros, destinatarios, &quot;text/html&quot;);&#xd;
                log.info(&quot;### ADMISSAO DIGITAL: E-mail enviado para &quot; + emailDestino);&#xd;
            } catch (e) {&#xd;
                log.error(&quot;### ADMISSAO DIGITAL: Erro ao enviar e-mail: &quot; + e);&#xd;
            }&#xd;
        }&#xd;
    }&#xd;
}</eventDescription>
    </WorkflowProcessEvent>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>beforeStateEntry</eventId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>var BSE_FIM_APROVADO = 74;&#xd;
&#xd;
function beforeStateEntry(sequenceId)&#xd;
{&#xd;
    log.info(&apos;Executando beforeStateEntry: &apos; + sequenceId);&#xd;
&#xd;
    // Verifica se é a etapa final de aprovação&#xd;
    if (sequenceId == BSE_FIM_APROVADO)&#xd;
    {&#xd;
        log.warn(&quot;AVISO: Datasets de integração (DS_FLUIG_0041 e ds_connector) não foram encontrados.&quot;);&#xd;
        log.warn(&quot;AVISO: A integração com o RM e o envio de e-mail via TBC foram PULADOS para permitir o avanço do processo.&quot;);&#xd;
&#xd;
        /* AS CHAMADAS ABAIXO FORAM COMENTADAS PARA NÃO GERAR ERRO.&#xd;
           PARA REATIVAR A INTEGRAÇÃO NO FUTURO (QUANDO OS DATASETS EXISTIREM),&#xd;
           BASTA REMOVER AS BARRAS (//) DO INÍCIO DAS LINHAS.&#xd;
        */&#xd;
&#xd;
        // montaXMLFunc();&#xd;
        // montaXMLDependente();&#xd;
    }&#xd;
}&#xd;
&#xd;
function montaXMLFunc()&#xd;
{&#xd;
	// Função mantida no código para uso futuro, mas não será executada agora.&#xd;
    log.info(&quot;Iniciando estrutura de montaXMLFunc (Inativa)...&quot;);&#xd;
&#xd;
	log.info(&quot;Iniciando montaXMLFunc...&quot;);&#xd;
	var CONNECT = DatasetFactory.getDataset(&quot;ds_connector&quot;, null, null, null);&#xd;
	var USUARIO = CONNECT.getValue(0,&quot;INTEGRADOR&quot;);&#xd;
	var SENHA = CONNECT.getValue(0, &quot;SENHA&quot;);&#xd;
&#xd;
	log.info(&quot;Recuperou usuario e senha do ds_connector...&quot;);&#xd;
&#xd;
	var formatoInput = new java.text.SimpleDateFormat(&quot;dd/MM/yyyy&quot;);&#xd;
	var formatoOutput = new java.text.SimpleDateFormat(&quot;yyyy-MM-dd&apos;T&apos;00:00:00&quot;);&#xd;
&#xd;
	var DatAdm = formatoInput.parse(hAPI.getCardValue(&quot;txtAdmissao&quot;));&#xd;
	DTAdmissao = formatoOutput.format(DatAdm);&#xd;
&#xd;
	//DATA DE NASCIMENTO&#xd;
	var Nasc = hAPI.getCardValue(&quot;dtDataNascColaborador&quot;);&#xd;
	if(Nasc!=&quot;&quot;){&#xd;
&#xd;
		var DataNascimento = formatoInput.parse(hAPI.getCardValue(&quot;dtDataNascColaborador&quot;));&#xd;
		DTNASC = formatoOutput.format(DataNascimento);&#xd;
	}if(Nasc==&quot;&quot;){&#xd;
		DTNASC=&quot;&quot;;&#xd;
	}&#xd;
	log.info(&quot;#### DTNASC: &quot; + DTNASC);&#xd;
&#xd;
	// DATE DE EMISSAO DA IDENTIDADE&#xd;
	var dtEmRG =hAPI.getCardValue(&quot;DTEMISSAOIDENT&quot;);&#xd;
	if(dtEmRG!=&quot;&quot;){&#xd;
&#xd;
		var DataRG = formatoInput.parse(hAPI.getCardValue(&quot;DTEMISSAOIDENT&quot;));&#xd;
		DTRG= formatoOutput.format(DataRG);&#xd;
	}if(dtEmRG==&quot;&quot;){&#xd;
		DTRG=&quot;&quot;;&#xd;
	}&#xd;
	log.info(&quot;#### DTRG: &quot; + DTRG);&#xd;
&#xd;
	// DATA DE TITULO DE ELEITOR&#xd;
	var DtTitu =hAPI.getCardValue(&quot;DTTITELEITOR&quot;);&#xd;
	if(DtTitu!=&quot;&quot;){&#xd;
&#xd;
		var DataTitu = formatoInput.parse(hAPI.getCardValue(&quot;DTTITELEITOR&quot;));&#xd;
		DataTitulo = formatoOutput.format(DataTitu);&#xd;
	}if(DtTitu==&quot;&quot;){&#xd;
		DataTitulo=&quot;&quot;;&#xd;
	}&#xd;
	log.info(&quot;#### DTRG: &quot; + DTRG);&#xd;
&#xd;
	// DATA DE EMISSAO DO CTPS&#xd;
	var EmCarttrabDt =hAPI.getCardValue(&quot;dtDataEmissaoCartTrab&quot;);&#xd;
	if(EmCarttrabDt!=&quot;&quot;){&#xd;
&#xd;
		var dtDataEmissaoCartTrab = formatoInput.parse(hAPI.getCardValue(&quot;dtDataEmissaoCartTrab&quot;));&#xd;
		DTCTPS = formatoOutput.format(dtDataEmissaoCartTrab);&#xd;
	}if(EmCarttrabDt==&quot;&quot;){&#xd;
		DTCTPS=&quot;&quot;;&#xd;
	}&#xd;
	log.info(&quot;#### DTCTPS: &quot; + DTCTPS);&#xd;
&#xd;
	// DATA DE VENCIMENTO DA CNH&#xd;
	var dtVencCNH=hAPI.getCardValue(&quot;DTVENCHABILIT&quot;);&#xd;
	if(dtVencCNH!=&quot;&quot;){&#xd;
&#xd;
		var DTVENCHABILIT = formatoInput.parse(hAPI.getCardValue(&quot;DTVENCHABILIT&quot;));&#xd;
		DTCNH = formatoOutput.format(DTVENCHABILIT);&#xd;
	}if(dtVencCNH==&quot;&quot;){&#xd;
		DTCNH=&quot;&quot;;&#xd;
	}&#xd;
	log.info(&quot;#### DTCNH: &quot; + DTCNH);&#xd;
&#xd;
	// DATA DE EMISSAO DA CNH&#xd;
	var DtCNHEm=hAPI.getCardValue(&quot;DTEMISSAOCNH&quot;);&#xd;
	if(DtCNHEm!=&quot;&quot;){&#xd;
&#xd;
		var DTEMISSAOCNH = formatoInput.parse(hAPI.getCardValue(&quot;DTEMISSAOCNH&quot;));&#xd;
		DTEMICNH = formatoOutput.format(DTEMISSAOCNH);&#xd;
	}if(DtCNHEm==&quot;&quot;){&#xd;
		DTEMICNH=&quot;&quot;;&#xd;
	}&#xd;
	log.info(&quot;#### DTEMICNH: &quot; + DTEMICNH);&#xd;
&#xd;
	// DATA DE EMISSAO DO RIC&#xd;
	var RICDt=hAPI.getCardValue(&quot;DtEmRIC&quot;);&#xd;
	if(RICDt!=&quot;&quot;){&#xd;
&#xd;
		var DtEmRIC = formatoInput.parse(hAPI.getCardValue(&quot;DtEmRIC&quot;));&#xd;
		DtEMRIC = formatoOutput.format(DtEmRIC);&#xd;
	}if(RICDt==&quot;&quot;){&#xd;
		DtEMRIC=&quot;&quot;;&#xd;
	}&#xd;
	log.info(&quot;#### DtEMRIC: &quot; + DtEMRIC);&#xd;
&#xd;
	// DATA DE EMISSAO DO RNE&#xd;
	var RNEDt=hAPI.getCardValue(&quot;DTRNE&quot;);&#xd;
	if(RNEDt!=&quot;&quot;){&#xd;
&#xd;
		var DTRNE = formatoInput.parse(hAPI.getCardValue(&quot;DTRNE&quot;));&#xd;
		DtRNE = formatoOutput.format(DTRNE);&#xd;
	}if(RNEDt==&quot;&quot;){&#xd;
		DtRNE=&quot;&quot;;&#xd;
	}&#xd;
	log.info(&quot;#### DtRNE: &quot; + DtRNE);&#xd;
&#xd;
	// DATA DE CHEGADA NO BRASIL&#xd;
	var chegada= hAPI.getCardValue(&quot;DtChegBras&quot;);&#xd;
	if(chegada!=&quot;&quot;){&#xd;
&#xd;
		var DtChegBras = formatoInput.parse(hAPI.getCardValue(&quot;DtChegBras&quot;));&#xd;
		DTChegBRASIL = formatoOutput.format(DtChegBras);&#xd;
	}if(chegada==&quot;&quot;){&#xd;
		DTChegBRASIL=&quot;&quot;;	&#xd;
	}&#xd;
	log.info(&quot;#### DTChegBRASIL: &quot; + DTChegBRASIL);	&#xd;
&#xd;
	// DATA DE EMISSAO DA primeira via CNH&#xd;
	var EmCNH= hAPI.getCardValue(&quot;DTEmPrimCNH&quot;);&#xd;
	if(EmCNH!=&quot;&quot;){&#xd;
&#xd;
		var EmCNH2 = formatoInput.parse(hAPI.getCardValue(&quot;DTEmPrimCNH&quot;));&#xd;
		EmCNH22 = formatoOutput.format(EmCNH2);&#xd;
	}if(EmCNH==&quot;&quot;){&#xd;
		EmCNH22=&quot;&quot;;	&#xd;
	}&#xd;
	log.info(&quot;#### EmCNH22: &quot; + EmCNH22);&#xd;
&#xd;
	// DATA CONT SINDICAL&#xd;
	var DtContSindical= hAPI.getCardValue(&quot;TxtDtContSind&quot;);&#xd;
	if(DtContSindical!=&quot;&quot;){&#xd;
&#xd;
		var DtSin = formatoInput.parse(hAPI.getCardValue(&quot;TxtDtContSind&quot;));&#xd;
		DTTContSindical = formatoOutput.format(DtSin);&#xd;
	}if(DtContSindical==&quot;&quot;){&#xd;
		DTTContSindical=&quot;&quot;;	&#xd;
	}&#xd;
	log.info(&quot;#### DTTContSindical: &quot; + DTTContSindical);&#xd;
&#xd;
&#xd;
	var xmlFunc=&apos;&apos;;&#xd;
&#xd;
	xmlFunc +=&apos;	&lt;FopFunc&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;PFunc&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODCOLIGADA&gt;&apos;+hAPI.getCardValue(&quot;txtCodcoligada&quot;)+&apos;&lt;/CODCOLIGADA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CHAPA&gt;&apos;+hAPI.getCardValue(&quot;TxtChapa&quot;)+&apos;&lt;/CHAPA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NROFICHAREG&gt;&lt;/NROFICHAREG&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODRECEBIMENTO&gt;M&lt;/CODRECEBIMENTO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODSITUACAO&gt;A&lt;/CODSITUACAO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODTIPO&gt;N&lt;/CODTIPO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODSECAO&gt;&apos;+hAPI.getCardValue(&quot;txtCentroCusto&quot;)+&apos;&lt;/CODSECAO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODFUNCAO&gt;&apos;+hAPI.getCardValue(&quot;txtCodFuncao&quot;)+&apos;&lt;/CODFUNCAO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODSINDICATO&gt;&apos;+hAPI.getCardValue(&quot;TxtCodSind&quot;)+&apos;&lt;/CODSINDICATO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODHORARIO&gt;&apos;+hAPI.getCardValue(&quot;TxtCodHor&quot;)+&apos;&lt;/CODHORARIO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NRODEPIRRF&gt;0&lt;/NRODEPIRRF&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NRODEPSALFAM&gt;0&lt;/NRODEPSALFAM&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DTBASE&gt;&apos;+DTAdmissao+&apos;&lt;/DTBASE&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;SALARIO&gt;&apos;+hAPI.getCardValue(&quot;txtSalario&quot;)+&apos;&lt;/SALARIO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;SITUACAOFGTS&gt;2&lt;/SITUACAOFGTS&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CONTRIBSINDICAL&gt;J&lt;/CONTRIBSINDICAL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;APOSENTADO&gt;0&lt;/APOSENTADO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;TEMMAIS65ANOS&gt;0&lt;/TEMMAIS65ANOS&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DATAADMISSAO&gt;&apos;+DTAdmissao+&apos;&lt;/DATAADMISSAO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;TIPOADMISSAO&gt;&apos;+hAPI.getCardValue(&quot;TxtCodTPADM&quot;)+&apos;&lt;/TIPOADMISSAO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;MOTIVOADMISSAO&gt;&apos;+hAPI.getCardValue(&quot;TxtCodMotADM&quot;)+&apos;&lt;/MOTIVOADMISSAO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;TEMPRAZOCONTR&gt;1&lt;/TEMPRAZOCONTR&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;FIMPRAZOCONTR&gt;&apos;+DTAdmissao+&apos;&lt;/FIMPRAZOCONTR&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DTVENCFERIAS&gt;&apos;+DTAdmissao+&apos;&lt;/DTVENCFERIAS&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NDIASLICREM1&gt;0.00&lt;/NDIASLICREM1&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NDIASLICREM2&gt;0.00&lt;/NDIASLICREM2&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;MEDIASALMATERN&gt;0.00&lt;/MEDIASALMATERN&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;SITUACAORAIS&gt;1&lt;/SITUACAORAIS&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;MEMBROSINDICAL&gt;0&lt;/MEMBROSINDICAL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;VINCULORAIS&gt;7&lt;/VINCULORAIS&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;MUDOUADMISSAO&gt;0&lt;/MUDOUADMISSAO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;MUDOUDTOPCAO&gt;1&lt;/MUDOUDTOPCAO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;PISPARAFGTS&gt;&apos;+hAPI.getCardValue(&quot;PIS&quot;)+&apos;&lt;/PISPARAFGTS&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;ULTIMORECALCULODATA&gt;&apos;+DTAdmissao+&apos;&lt;/ULTIMORECALCULODATA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;ULTIMORECALCULOHORA&gt;&apos;+DTAdmissao+&apos;&lt;/ULTIMORECALCULOHORA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DESCONTAAVISOPREVIO&gt;0&lt;/DESCONTAAVISOPREVIO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODFILIAL&gt;1&lt;/CODFILIAL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NOME&gt;&apos;+hAPI.getCardValue(&quot;txtNomeColaborador&quot;)+&apos;&lt;/NOME&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;INDINICIOHOR&gt;1&lt;/INDINICIOHOR&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;PISPASEP&gt;&apos;+hAPI.getCardValue(&quot;PIS&quot;)+&apos;&lt;/PISPASEP&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODPESSOA&gt;0&lt;/CODPESSOA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODBANCOPAGTO&gt;999&lt;/CODBANCOPAGTO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODBANCOPIS&gt;104&lt;/CODBANCOPIS&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;RESCISAOCALCULADA&gt;0&lt;/RESCISAOCALCULADA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;MEMBROCIPA&gt;0&lt;/MEMBROCIPA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;USASALCOMPOSTO&gt;0&lt;/USASALCOMPOSTO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;REGATUAL&gt;1&lt;/REGATUAL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;JORNADAMENSAL&gt;13200&lt;/JORNADAMENSAL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODOCORRENCIA&gt;0&lt;/CODOCORRENCIA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODCATEGORIA&gt;11&lt;/CODCATEGORIA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;ESUPERVISOR&gt;0&lt;/ESUPERVISOR&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;USACONTROLEDESALDO&gt;0&lt;/USACONTROLEDESALDO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;MUDOUCI&gt;0&lt;/MUDOUCI&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;FGTSMESANTRECOLGRFP&gt;0&lt;/FGTSMESANTRECOLGRFP&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;TRABALHOUNADEMISSAO&gt;0&lt;/TRABALHOUNADEMISSAO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;SITUACAOINSS&gt;1&lt;/SITUACAOINSS&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;TEMDEDUCAOCPMF&gt;1&lt;/TEMDEDUCAOCPMF&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NRODIASFERIASCORRIDOS&gt;0&lt;/NRODIASFERIASCORRIDOS&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NRODIASABONOCORRIDOS&gt;0&lt;/NRODIASABONOCORRIDOS&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;POSICAOABONO&gt;0&lt;/POSICAOABONO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;QUERADIANTAMENTO&gt;0&lt;/QUERADIANTAMENTO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;SEXO&gt;&apos;+hAPI.getCardValue(&quot;txtSexo&quot;)+&apos;&lt;/SEXO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NACIONALIDADE&gt;10&lt;/NACIONALIDADE&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;GRAUINSTRUCAO&gt;&apos;+hAPI.getCardValue(&quot;GRAUINSTRUCAOCod&quot;)+&apos;&lt;/GRAUINSTRUCAO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NATURALIDADE&gt;&apos;+hAPI.getCardValue(&quot;txtNaturalidade&quot;)+&apos;&lt;/NATURALIDADE&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;APELIDO&gt;&apos;+hAPI.getCardValue(&quot;txtNomeColaborador&quot;)+&apos;&lt;/APELIDO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DTNASCIMENTO&gt;&apos;+DTNASC+&apos;&lt;/DTNASCIMENTO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CARTIDENTIDADE&gt;&apos;+hAPI.getCardValue(&quot;TxtRg&quot;)+&apos;&lt;/CARTIDENTIDADE&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;ORGEMISSORIDENT&gt;&apos;+hAPI.getCardValue(&quot;ORGAOCARTIDENTIDADE&quot;)+&apos;&lt;/ORGEMISSORIDENT&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;UFCARTIDENT&gt;&apos;+hAPI.getCardValue(&quot;CODUFCARTIDENTIDADE&quot;)+&apos;&lt;/UFCARTIDENT&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CARTEIRATRAB&gt;&apos;+hAPI.getCardValue(&quot;txtCartTrab&quot;)+&apos;&lt;/CARTEIRATRAB&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;SERIECARTTRAB&gt;&apos;+hAPI.getCardValue(&quot;txtSerieCart&quot;)+&apos;&lt;/SERIECARTTRAB&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;UFCARTTRAB&gt;&apos;+hAPI.getCardValue(&quot;CODUFCTPS&quot;)+&apos;&lt;/UFCARTTRAB&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;TITULOELEITOR&gt;&apos;+hAPI.getCardValue(&quot;TITULOELEITOR&quot;)+&apos;&lt;/TITULOELEITOR&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CERTIFRESERV&gt;&apos;+hAPI.getCardValue(&quot;CERTIFRESERV&quot;)+&apos;&lt;/CERTIFRESERV&gt;	&apos;;&#xd;
&#xd;
&#xd;
	log.info(&quot;#### CPF: &quot; + hAPI.getCardValue(&quot;cpfcnpj&quot;));&#xd;
	log.info(&quot;#### CPF VALUE: &quot; + hAPI.getCardValue(&quot;cpfcnpjValue&quot;));&#xd;
&#xd;
	xmlFunc +=&apos;	&lt;CPF&gt;&apos;+ hAPI.getCardValue(&quot;cpfcnpjValue&quot;) + &apos;&lt;/CPF&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;RUA&gt;&apos;+hAPI.getCardValue(&quot;txtRUA&quot;)+&apos;&lt;/RUA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NUMERO&gt;&apos;+hAPI.getCardValue(&quot;txtNUMERO&quot;)+&apos;&lt;/NUMERO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;BAIRRO&gt;&apos;+hAPI.getCardValue(&quot;txtBAIRRO&quot;)+&apos;&lt;/BAIRRO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CIDADE&gt;&apos;+hAPI.getCardValue(&quot;txtNOMEMUNICIPIO&quot;)+&apos;&lt;/CIDADE&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;ESTADO&gt;&apos;+hAPI.getCardValue(&quot;txtCODETD&quot;)+&apos;&lt;/ESTADO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;PAIS&gt;&apos;+hAPI.getCardValue(&quot;txtPAIS&quot;)+&apos;&lt;/PAIS&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CEP&gt;&apos;+hAPI.getCardValue(&quot;txtCEP&quot;)+&apos;&lt;/CEP&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NOMEBANCOPGTO&gt;Cheque&lt;/NOMEBANCOPGTO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NOMEPAI&gt;CARLOS MAIA DE OLIVEIRA&lt;/NOMEPAI&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NOMEMAE&gt;DIRCE POLICARPO DE OLIVEIRA&lt;/NOMEMAE&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODIGO&gt;0&lt;/CODIGO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;Jornada_Mensal&gt;220:00&lt;/Jornada_Mensal&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;Hora&gt;91190.91&lt;/Hora&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DEFICIENTEFISICO&gt;0&lt;/DEFICIENTEFISICO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DEFICIENTEAUDITIVO&gt;0&lt;/DEFICIENTEAUDITIVO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DEFICIENTEFALA&gt;0&lt;/DEFICIENTEFALA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DEFICIENTEVISUAL&gt;0&lt;/DEFICIENTEVISUAL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DEFICIENTEMENTAL&gt;0&lt;/DEFICIENTEMENTAL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;BRPDH&gt;0&lt;/BRPDH&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;HSTAFT_ESTTEMPOSERVICO&gt;false&lt;/HSTAFT_ESTTEMPOSERVICO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;INDICADORSINDICALIZADO&gt;0&lt;/INDICADORSINDICALIZADO&gt;	&apos;;&#xd;
	xmlFunc +=&apos; &lt;NOMEFUNC&gt;&apos;+hAPI.getCardValue(&quot;txtNomeColaborador&quot;)+&apos;&lt;/NOMEFUNC&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CORRACA&gt;&apos;+hAPI.getCardValue(&quot;CORRACA&quot;)+&apos;&lt;/CORRACA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;ESTADOCIVIL&gt;&apos;+hAPI.getCardValue(&quot;txtEstCivilCod&quot;)+&apos;&lt;/ESTADOCIVIL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;ESTADONATAL&gt;&apos;+hAPI.getCardValue(&quot;ESTADONatalCod&quot;)+&apos;&lt;/ESTADONATAL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CANDIDATO&gt;1&lt;/CANDIDATO&gt;	&apos;;&#xd;
	xmlFunc +=&apos; &lt;CODTIPOBAIRRO&gt;&apos;+hAPI.getCardValue(&quot;txtCODTIPOBAIRRO&quot;)+&apos;&lt;/CODTIPOBAIRRO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODTIPORUA&gt;&apos;+hAPI.getCardValue(&quot;txtCODTIPORUA&quot;)+&apos;&lt;/CODTIPORUA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;TPREGIMEPREV&gt;1&lt;/TPREGIMEPREV&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DEFICIENTEINTELECTUAL&gt;0&lt;/DEFICIENTEINTELECTUAL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODMUNICIPIO&gt;&apos;+hAPI.getCardValue(&quot;txtCODMUNICIPIO&quot;)+&apos;&lt;/CODMUNICIPIO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;SITUACAOIRRF&gt;1&lt;/SITUACAOIRRF&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CARREGOUAVISOPREVIO&gt;0&lt;/CARREGOUAVISOPREVIO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;RECEBSEGDESEMP&gt;0&lt;/RECEBSEGDESEMP&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;INDPAGTOJUIZO&gt;0&lt;/INDPAGTOJUIZO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODIGORECEITA3533&gt;0&lt;/CODIGORECEITA3533&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;IDADE&gt;27&lt;/IDADE&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODCATEGORIAESOCIAL&gt;101&lt;/CODCATEGORIAESOCIAL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;ESOCIALFUNCAOCONF&gt;0&lt;/ESOCIALFUNCAOCONF&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;FUMANTE&gt;0&lt;/FUMANTE&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;FERIASDIASUTEIS&gt;0&lt;/FERIASDIASUTEIS&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;Periodo_Aquisitivo&gt;&lt;/Periodo_Aquisitivo&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;Limite_Ferias_Dobro&gt;&lt;/Limite_Ferias_Dobro&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DiasFaltasFeriasNormais&gt;0&lt;/DiasFaltasFeriasNormais&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CONJUGEBRASIL&gt;0&lt;/CONJUGEBRASIL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;NATURALIZADO&gt;0&lt;/NATURALIZADO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;FILHOSBRASIL&gt;0&lt;/FILHOSBRASIL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;INVESTTREINANT&gt;0.00&lt;/INVESTTREINANT&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;AJUSTATAMANHOFOTO&gt;0&lt;/AJUSTATAMANHOFOTO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DATAAPROVACAOCURR&gt;&lt;/DATAAPROVACAOCURR&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;ESTELEIT xml:space=&quot;preserve&quot;&gt; &lt;/ESTELEIT&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;ESTADOROW&gt;0&lt;/ESTADOROW&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;ROWVALIDA&gt;0&lt;/ROWVALIDA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;ALUNO&gt;0&lt;/ALUNO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;PROFESSOR&gt;0&lt;/PROFESSOR&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;USUARIOBIBLIOS&gt;0&lt;/USUARIOBIBLIOS&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;FUNCIONARIO&gt;0&lt;/FUNCIONARIO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;EXFUNCIONARIO&gt;1&lt;/EXFUNCIONARIO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODNATURALIDADE&gt;04805&lt;/CODNATURALIDADE&gt;	&apos;;&#xd;
&#xd;
	// DATAS&#xd;
	xmlFunc +=&apos;	&lt;DTMUDANCASALARIO&gt;&apos; + DTAdmissao + &apos;&lt;/DTMUDANCASALARIO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DTMUDANCAFUNCAO&gt;&apos; + DTAdmissao + &apos;&lt;/DTMUDANCAFUNCAO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;HSTSIT_DATAMUDANCA&gt;&apos; + DTAdmissao + &apos;&lt;/HSTSIT_DATAMUDANCA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DTMUDANCASECAO&gt;&apos; + DTAdmissao + &apos;&lt;/DTMUDANCASECAO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DTMUDANCACONTRIBSINDICAL&gt;&apos; + DTAdmissao + &apos;&lt;/DTMUDANCACONTRIBSINDICAL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;HSTSEFIP_DTMUDANCA&gt;&apos; + DTAdmissao + &apos;&lt;/HSTSEFIP_DTMUDANCA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;HSTBANCO_DTMUDANCA&gt;&apos; + DTAdmissao + &apos;&lt;/HSTBANCO_DTMUDANCA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;DTMUDANCAHORARIO&gt;&apos; + DTAdmissao + &apos;&lt;/DTMUDANCAHORARIO&gt;	&apos;;&#xd;
&#xd;
	// MOTIVOS&#xd;
	xmlFunc +=&apos;	&lt;MOTMUDANCASALARIO&gt;01&lt;/MOTMUDANCASALARIO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;MOTMUDANCASECAO&gt;01&lt;/MOTMUDANCASECAO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;MOTMUDANCAFUNCAO&gt;1&lt;/MOTMUDANCAFUNCAO&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;HSTSIT_MOTIVO&gt;01&lt;/HSTSIT_MOTIVO&gt;	&apos;;&#xd;
	&#xd;
	xmlFunc +=&apos;	&lt;/PFunc&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;PFCOMPL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODCOLIGADA&gt;&apos;+hAPI.getCardValue(&quot;txtCodcoligada&quot;)+&apos;&lt;/CODCOLIGADA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CHAPA&gt;&apos;+hAPI.getCardValue(&quot;TxtChapa&quot;)+&apos;&lt;/CHAPA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;PROPAY_50&gt;01&lt;/PROPAY_50&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;PROPAY_112&gt;1 - PRESIDENCIA E DIRETORIA&lt;/PROPAY_112&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;PROPAY_117&gt;01&lt;/PROPAY_117&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;PROPAY_132&gt;01&lt;/PROPAY_132&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;/PFCOMPL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;VPCOMPL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;CODPESSOA&gt;0&lt;/CODPESSOA&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;/VPCOMPL&gt;	&apos;;&#xd;
	xmlFunc +=&apos;	&lt;/FopFunc&gt;	&apos;;&#xd;
	&#xd;
	log.info(&quot;#### xmlFunc: &quot; + xmlFunc);&#xd;
&#xd;
	/*&#xd;
	- Campo DTMUDANCASALARIO - Data da Mudança do Salário é obrigatório na inclusão do funcionário&#xd;
	- Campo DTMUDANCAFUNCAO - Data da Mudança da Função é obrigatório na inclusão do funcionário&#xd;
	- Campo HSTSIT_DATAMUDANCA - Data da Mudança da Situação é obrigatório na inclusão do funcionário&#xd;
	- Campo DTMUDANCASECAO - Data de Mudança da Seção é obrigatório na inclusão do funcionário&#xd;
	- Campo DTMUDANCACONTRIBSINDICAL - Data da Mudança da Contribuição Sindical é obrigatório na inclusão do funcionário&#xd;
	- Campo HSTSEFIP_DTMUDANCA - Data da Mudança do SEFIP é obrigatório na inclusão do funcionário&#xd;
	- Campo HSTBANCO_DTMUDANCA - Data da Mudança do Banco Principal é obrigatório na inclusão do funcionário&#xd;
	- Campo DTMUDANCAHORARIO - Data da Mudança do Horário é obrigatório na inclusão do funcionário&#xd;
	*/&#xd;
	&#xd;
	var CONNECT = DatasetFactory.getDataset(&quot;ds_connector&quot;, null, null, null);&#xd;
	var USUARIO = CONNECT.getValue(0,&quot;INTEGRADOR&quot;);&#xd;
	var SENHA = CONNECT.getValue(0, &quot;SENHA&quot;);&#xd;
	var NOME_SERVICO = &quot;WSDATASERVER&quot;;&#xd;
	var CAMINHO_SERVICO = &quot;com.totvs.WsDataServer&quot;;&#xd;
&#xd;
	var servico = ServiceManager.getServiceInstance(NOME_SERVICO);&#xd;
	log.info(&quot;#### instanciou servico...&quot;);&#xd;
&#xd;
	var serviceHelper = servico.getBean();&#xd;
	log.info(&quot;#### instanciou serviceHelper...&quot;);&#xd;
&#xd;
	var instancia = servico.instantiate(CAMINHO_SERVICO);&#xd;
	log.info(&quot;#### criou a instancia: &quot; + CAMINHO_SERVICO);&#xd;
&#xd;
	var ws = instancia.getRMIwsDataServer();&#xd;
&#xd;
	var authenticatedService = serviceHelper.getBasicAuthenticatedClient(ws, &quot;com.totvs.IwsDataServer&quot;, USUARIO, SENHA); &#xd;
&#xd;
	log.info(&quot;#### Criou authenticatedService e vai chamar saveRecordEmail::FopFuncData&quot;);&#xd;
&#xd;
	try&#xd;
	{&#xd;
		var result = authenticatedService.saveRecordEmail(&apos;FopFuncData&apos;, xmlFunc, &apos;CODCOLIGADA=1;CODSISTEMA=P&apos;,&quot;suportesoter@consultoriainterativa.com.br&quot;);&#xd;
&#xd;
		log.info(&quot;#### Resultado da comunicação com o TOTVS TBC: &quot; + result);&#xd;
&#xd;
		if ((result != null) &amp;&amp; (result.indexOf(&quot;===&quot;) != -1))&#xd;
		{&#xd;
			var msgErro = result.substring(0, result.indexOf(&quot;===&quot;));&#xd;
			log.info(&quot;#### Erro na comunicação com o TOTVS TBC: &quot; + msgErro);&#xd;
			throw msgErro;&#xd;
&#xd;
		}&#xd;
		else&#xd;
		{&#xd;
			log.info(&quot;#### Nao houve erro. Integracao FUNC realizada com SUCESSO!&quot;);&#xd;
		}&#xd;
	}&#xd;
	catch (e)&#xd;
	{&#xd;
		if (e == null)&#xd;
		{&#xd;
			e = &quot;Erro desconhecido; verifique o log do AppServer&quot;;&#xd;
		}&#xd;
&#xd;
		var mensagemErro = &quot;Erro na comunicação com o TOTVS TBC: &quot; + e;&#xd;
		log.error(mensagemErro + &quot; ---&gt; &quot; + xmlFunc);&#xd;
		throw mensagemErro;&#xd;
	}&#xd;
&#xd;
}&#xd;
&#xd;
function montaXMLDependente(){&#xd;
	// Função mantida no código para uso futuro, mas não será executada agora.&#xd;
    log.info(&quot;Iniciando estrutura de montaXMLDependente (Inativa)...&quot;);&#xd;
&#xd;
	log.info(&quot;Iniciando montaXMLDependente...&quot;);&#xd;
	//Para cada campo de data tenho que fazer a conversão dela.&#xd;
	var formatoInput = new java.text.SimpleDateFormat(&quot;dd/MM/yyyy&quot;);&#xd;
	var formatoOutput = new java.text.SimpleDateFormat(&quot;yyyy-MM-dd&apos;T&apos;hh:mm:ss&quot;);&#xd;
&#xd;
&#xd;
	var indexes = getIndexes(&apos;txtNomDepen&apos;);&#xd;
	log.info(&quot;indexes Depente&quot;+ indexes);&#xd;
	var Tamanho = indexes.size();&#xd;
	log.info(&quot;Tamanho Depente&quot;+ Tamanho);&#xd;
	var iterator = indexes.iterator();	&#xd;
	log.info(&quot;iterator Depente&quot;+ iterator);&#xd;
	var Seq=0;&#xd;
	var SeqParentesco = 0;&#xd;
&#xd;
	while(iterator.hasNext()){&#xd;
		Seq++;&#xd;
		var index = iterator.next();&#xd;
		log.info(&quot;index Depente&quot;+ index);&#xd;
		var Next = iterator.hasNext();	&#xd;
		log.info(&quot;Next Depente&quot;+ Next);&#xd;
		//var SeqEstoque = 0;&#xd;
&#xd;
		var NOME = hAPI.getCardValue(&quot;txtNomDepen___&quot;+ index);&#xd;
		log.info(&quot;index NOME&quot;+ NOME);&#xd;
		var PARENTESCO =hAPI.getCardValue(&quot;codParentesco___&quot;+index);&#xd;
		log.info(&quot;index PARENTESCO&quot;+ PARENTESCO);&#xd;
		var SEXO = hAPI.getCardValue(&quot;txtSexoDepen___&quot;+index);&#xd;
		var CHAPA = hAPI.getCardValue(&quot;TxtChapa&quot;); &#xd;
		var INCSALFAM = hAPI.getCardValue(&quot;TxtIncSalFamilia___&quot;+index); &#xd;
		var INCIRRF= hAPI.getCardValue(&quot;TxtIncIRRF___&quot;+index); &#xd;
		var INCINSS = hAPI.getCardValue(&quot;TxtIncINSS___&quot;+index); &#xd;
		var INCPENSAO = hAPI.getCardValue(&quot;TxtIncPensao___&quot;+index); &#xd;
		var INCASSMED = hAPI.getCardValue(&quot;TxtIncMedica___&quot;+index); &#xd;
		var CARTORIO = hAPI.getCardValue(&quot;TxtCartorio___&quot;+index); &#xd;
		var REGISTRO = hAPI.getCardValue(&quot;TxtRegistro___&quot;+index); &#xd;
		var LIVRO = hAPI.getCardValue(&quot;TxtLivro___&quot;+index); &#xd;
		var FOLHA = hAPI.getCardValue(&quot;TxtFolha___&quot;+index);&#xd;
		var cpfDepend = hAPI.getCardValue(&quot;TxtCPFDep___&quot;+index); &#xd;
		//var CARTVACINA = hAPI.getCardValue(&quot;TxtEntVacina___&quot;+index);  &#xd;
		//var FREQESCOL = hAPI.getCardValue(&quot;TxtEscolar___&quot;+index);   &#xd;
&#xd;
&#xd;
&#xd;
		var DTNASCIMENTO = hAPI.getCardValue(&quot;txtDtNascDepen___&quot;+index);&#xd;
		log.info(&quot;indexAndre&quot;+ index);&#xd;
		log.info(&quot;DTNASCIMENTOandre&quot;+ DTNASCIMENTO);&#xd;
		if(DTNASCIMENTO!=&quot;&quot;){&#xd;
&#xd;
			var DataNascimento = formatoInput.parse(hAPI.getCardValue(&quot;txtDtNascDepen___&quot;+index));&#xd;
			DTNAS = formatoOutput.format(DataNascimento);&#xd;
		}if(DTNASCIMENTO==&quot;&quot;){&#xd;
			DTNAS=&quot;&quot;;&#xd;
		}&#xd;
&#xd;
		if(NOME !=&quot;&quot; &amp;&amp; PARENTESCO !=&quot;&quot;){&#xd;
&#xd;
&#xd;
			SeqParentesco++;&#xd;
&#xd;
			log.info(&quot;SeqParentesco&quot; + SeqParentesco);&#xd;
&#xd;
			var xmldepen=&apos;&apos;;&#xd;
&#xd;
			xmldepen += &apos;&lt;PFDepend&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;CODCOLIGADA&gt;1&lt;/CODCOLIGADA&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;CHAPA&gt;&apos;+CHAPA+&apos;&lt;/CHAPA&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;NRODEPEND&gt;&apos;+SeqParentesco+&apos;&lt;/NRODEPEND&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;NOME&gt;&apos;+NOME+&apos;&lt;/NOME&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;CPF&gt;&apos;+cpfDepend+&apos;&lt;/CPF&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;DTNASCIMENTO&gt;&apos;+DTNAS+&apos;&lt;/DTNASCIMENTO&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;SEXO&gt;&apos;+SEXO+&apos;&lt;/SEXO&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;ESTADOCIVIL&gt;O&lt;/ESTADOCIVIL&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;INCIRRF&gt;&apos;+INCIRRF+&apos;&lt;/INCIRRF&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;INCINSS&gt;&apos;+INCINSS+&apos;&lt;/INCINSS&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;INCASSISTMEDICA&gt;&apos;+INCASSMED+&apos;&lt;/INCASSISTMEDICA&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;INCPENSAO&gt;&apos;+INCPENSAO+&apos;&lt;/INCPENSAO&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;GRAUPARENTESCO&gt;&apos;+PARENTESCO+&apos;&lt;/GRAUPARENTESCO&gt;&apos;;&#xd;
			//xmldepen += &apos;&lt;CARTAOVACINA&gt;&apos;+CARTVACINA+&apos;&lt;/CARTAOVACINA&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;PERCENTUAL&gt;0.00&lt;/PERCENTUAL&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;BRUTO&gt;0&lt;/BRUTO&gt;&apos;;&#xd;
			//xmldepen += &apos;&lt;FREQESCOLAR&gt;&apos;+FREQESCOL+&apos;&lt;/FREQESCOLAR&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;UNIVERSITARIO&gt;0&lt;/UNIVERSITARIO&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;INCSALFAM&gt;&apos;+INCSALFAM+&apos;&lt;/INCSALFAM&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;CARTORIO&gt;&apos;+CARTORIO+&apos;&lt;/CARTORIO&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;NROREGISTRO&gt;&apos;+REGISTRO+&apos;&lt;/NROREGISTRO&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;NROLIVRO&gt;&apos;+LIVRO+&apos;&lt;/NROLIVRO&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;NROFOLHA&gt;&apos;+FOLHA+&apos;&lt;/NROFOLHA&gt;&apos;&#xd;
			xmldepen += &apos;&lt;/PFDepend&gt;&apos;;&#xd;
&#xd;
			xmldepen += &apos;&lt;PFDEPENDCOMPL&gt;&apos;;&#xd;
			xmldepen += &apos;  &lt;CODCOLIGADA&gt;1&lt;/CODCOLIGADA&gt;&apos;;&#xd;
			xmldepen += &apos;  &lt;CHAPA&gt;&apos;+CHAPA+&apos;&lt;/CHAPA&gt;&apos;;&#xd;
			xmldepen += &apos;  &lt;NRODEPEND&gt;&apos;+SeqParentesco+&apos;&lt;/NRODEPEND&gt;&apos;;&#xd;
			xmldepen += &apos;  &lt;PLANOSAUDE&gt;00&lt;/PLANOSAUDE&gt;&apos;;&#xd;
			xmldepen += &apos;&lt;/PFDEPENDCOMPL&gt;&apos;;&#xd;
&#xd;
		}&#xd;
&#xd;
		var CONNECT = DatasetFactory.getDataset(&quot;ds_connector&quot;, null, null, null);&#xd;
		var USUARIO = CONNECT.getValue(0,&quot;INTEGRADOR&quot;);&#xd;
		var SENHA = CONNECT.getValue(0, &quot;SENHA&quot;);&#xd;
		var NOME_SERVICO = &quot;WSDATASERVER&quot;;&#xd;
		var CAMINHO_SERVICO = &quot;com.totvs.WsDataServer&quot;;&#xd;
		var servico = ServiceManager.getServiceInstance(NOME_SERVICO);&#xd;
		var serviceHelper = servico.getBean();&#xd;
		var instancia = servico.instantiate(CAMINHO_SERVICO);&#xd;
		var ws = instancia.getRMIwsDataServer();&#xd;
		var authenticatedService = serviceHelper.getBasicAuthenticatedClient(ws, &quot;com.totvs.IwsDataServer&quot;, USUARIO, SENHA); &#xd;
&#xd;
		//var inicioxml=&quot;&lt;FopFunc&gt;&quot;;&#xd;
		//var FimXML = &quot;&lt;/FopFunc&gt;&quot;;&#xd;
		var xml = xmldepen;&#xd;
		var inicioxml=&quot;&lt;FopDepend&gt;&quot;;&#xd;
		var FimXML = &quot;&lt;/FopDepend&gt;&quot;;&#xd;
&#xd;
&#xd;
		try&#xd;
		{&#xd;
			//var result = authenticatedService.saveRecordEmail(&apos;FopDependData&apos;, inicioxml + xml + FimXML, &apos;CODCOLIGADA=1;CODSISTEMA=P&apos;,&quot;andre.oliveirabpit@gmail.com&quot;); //&quot;suportesoter@consultoriainterativa.com.br&quot;&#xd;
			var result = authenticatedService.saveRecord(&apos;FopDependData&apos;, inicioxml + xml + FimXML, &apos;CODCOLIGADA=1;CODSISTEMA=P&apos;);&#xd;
&#xd;
			if ((result != null) &amp;&amp; (result.indexOf(&quot;===&quot;) != -1))&#xd;
			{&#xd;
				var msgErro = result.substring(0, result.indexOf(&quot;===&quot;));&#xd;
&#xd;
				throw msgErro;&#xd;
&#xd;
			}&#xd;
			else&#xd;
			{&#xd;
				log.info(&quot;#### Nao houve erro. Integracao Dependente realizada com SUCESSO!&quot;);&#xd;
			}&#xd;
		}&#xd;
		catch (e)&#xd;
		{&#xd;
			if (e == null)&#xd;
			{&#xd;
				e = &quot;Erro desconhecido; verifique o log do AppServer&quot;;&#xd;
			}&#xd;
&#xd;
			var mensagemErro = &quot;Erro na comunicação com o TOTVS TBC: &quot; + e;&#xd;
			log.error(mensagemErro + &quot; ---&gt; &quot; + xml);&#xd;
&#xd;
			throw mensagemErro;&#xd;
		}&#xd;
&#xd;
	}&#xd;
}&#xd;
&#xd;
&#xd;
</eventDescription>
    </WorkflowProcessEvent>
    <WorkflowProcessEvent>
      <workflowProcessEventPK>
        <companyId>1</companyId>
        <eventId>afterTaskCreate</eventId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
      </workflowProcessEventPK>
      <eventDescription>/*function afterTaskCreate(colleagueId){&#xd;
	&#xd;
	var Dia =hAPI.getCardValue(&quot;txtDiaLimiteProc&quot;);; &#xd;
	var Mes =hAPI.getCardValue(&quot;txtMesLimiteProc&quot;); &#xd;
	var Ano =hAPI.getCardValue(&quot;txtAnoLimiteProc&quot;); &#xd;
	var mesCerto=Mes-1;&#xd;
	&#xd;
&#xd;
	&#xd;
	 var nrProxAtividade = getValue(&quot;WKNextState&quot;);&#xd;
	    if (nrProxAtividade == &quot;18&quot;){ //atividade entre paralelas&#xd;
	 &#xd;
	        var data = new Date();&#xd;
	        var numEmpresa = getValue(&quot;WKCompany&quot;);&#xd;
	     &#xd;
	        //seta o dia, m?s (Janeiro ? 0) e ano&#xd;
	        data.setDate(Dia);&#xd;
	        data.setMonth(mesCerto);&#xd;
	        data.setFullYear(Ano);&#xd;
	        &#xd;
	        // Recupera o numero da solicita??o&#xd;
	        var numProcesso = getValue(&quot;WKNumProces&quot;);&#xd;
	     &#xd;
	        // Seta o prazo para as 18:00&#xd;
	        hAPI.setDueDate(numProcesso, hAPI.getActualThread(numEmpresa, numProcesso, nrProxAtividade), colleagueId, data, 64800);&#xd;
}&#xd;
	    &#xd;
		 var nrProxAtividade = getValue(&quot;WKNextState&quot;);&#xd;
		    if (nrProxAtividade == &quot;66&quot;){ //atividade entre paralelas&#xd;
		 &#xd;
		        var data = new Date();&#xd;
		        var numEmpresa = getValue(&quot;WKCompany&quot;);&#xd;
		     &#xd;
		        //seta o dia, m?s (Janeiro ? 0) e ano&#xd;
		        data.setDate(Dia);&#xd;
		        data.setMonth(mesCerto);&#xd;
		        data.setFullYear(Ano);&#xd;
		        &#xd;
		        // Recupera o numero da solicita??o&#xd;
		        var numProcesso = getValue(&quot;WKNumProces&quot;);&#xd;
		     &#xd;
		        // Seta o prazo para as 18:00&#xd;
		        hAPI.setDueDate(numProcesso, hAPI.getActualThread(numEmpresa, numProcesso, nrProxAtividade), colleagueId, data, 64800);&#xd;
	}&#xd;
}*/</eventDescription>
    </WorkflowProcessEvent>
  </list>
  <list/>
  <list>
    <SwimLane>
      <color>FFFFFF</color>
      <height>290</height>
      <width>1143</width>
      <positionX>11</positionX>
      <positionY>10</positionY>
      <stateName>Pool</stateName>
      <type>1</type>
      <parentSequence>0</parentSequence>
      <swimLanePK>
        <companyId>1</companyId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
        <sequence>2</sequence>
      </swimLanePK>
    </SwimLane>
  </list>
  <list>
    <ProcessComponGraf>
      <componType>1</componType>
      <positionX>110</positionX>
      <positionY>127</positionY>
      <processComponGrafPK>
        <companyId>1</companyId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
        <componGrafSequence>3</componGrafSequence>
      </processComponGrafPK>
      <stateName>Início do Processo</stateName>
    </ProcessComponGraf>
  </list>
  <list>
    <ProcessLinkAssoc>
      <processLinkAssocPK>
        <companyId>1</companyId>
        <processId>FLUIG-0002</processId>
        <version>1</version>
        <linkSequence>4</linkSequence>
      </processLinkAssocPK>
      <initialStateSequence>3</initialStateSequence>
      <finalStateSequence>1</finalStateSequence>
    </ProcessLinkAssoc>
  </list>
  <list/>
  <list/>
  <list/>
  <list/>
  <list/>
  <list/>
  <list/>
  <list/>
  <list/>
</list>